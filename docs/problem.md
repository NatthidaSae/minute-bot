üß© 1. ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£ (Problem) : ‡πÑ‡∏ü‡∏•‡πå‡∏ï‡∏¥‡∏î‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏á‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤ database ‡πÄ‡πÄ‡∏•‡πâ‡∏ß‡πÑ‡∏ü‡∏•‡πå‡∏°‡∏µ‡∏ï‡∏ï‡∏¥‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô ‡πÅ‡∏ï‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á row ‡πÉ‡∏´‡∏°‡πà ‡∏à‡∏£‡∏¥‡∏á‡πÜ‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ‡πÑ‡∏≠‡∏î‡∏µ meeting ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô
‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ "‡πÄ‡∏Å‡∏¥‡∏î‡∏≠‡∏∞‡πÑ‡∏£‡∏Ç‡∏∂‡πâ‡∏ô"


‡πÇ‡∏î‡∏¢‡∏ï‡∏≠‡∏ô‡πÅ‡∏£‡∏Å‡∏ó‡∏µ‡πà‡∏•‡∏≠‡∏á‡πÄ‡∏ó‡∏™‡∏£‡∏∞‡∏ö‡∏ö‡πÉ‡∏´‡πâ‡∏°‡∏±‡∏ô‡∏Å‡∏ß‡πâ‡∏≤‡∏ô‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏î‡πâ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏õ‡∏¥‡∏î‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏¥‡πâ‡∏á‡πÑ‡∏ß‡πâ ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏à‡∏≠‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ô‡∏µ‡πâ‡∏Ñ‡∏∑‡∏≠ ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô cronjob ‡∏ó‡∏µ‡πà‡∏°‡∏±‡∏ô‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ó‡∏∏‡∏Å 10 ‡∏ô‡∏≤‡∏ó‡∏µ‡∏Ñ‡∏∑‡∏≠‡∏°‡∏±‡∏ô‡∏£‡∏ß‡∏°‡∏ñ‡∏∂‡∏á‡∏Å‡∏≤‡∏£‡∏Å‡∏ß‡πâ‡∏≤‡∏ô‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ó‡∏µ‡πà‡πÅ‡∏°‡πâ‡πÅ‡∏ï‡πà‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡πÄ‡∏Ñ‡∏¢‡∏™‡∏£‡∏∏‡∏õ‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß ‡∏Å‡∏•‡∏±‡∏ö‡∏ô‡∏≥‡∏Å‡∏•‡∏±‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ß‡∏ô‡∏Å‡∏≤‡∏£‡∏°‡∏≤‡πÉ‡∏´‡∏°‡πà ‡∏ô‡∏≥‡πÑ‡∏õ‡∏™‡∏£‡∏∏‡∏õ‡πÉ‡∏´‡∏°‡πà‡∏Å‡∏±‡∏ö llm ‡πÄ‡πÄ‡∏•‡πâ‡∏ß‡∏™‡πà‡∏á‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡∏£‡∏∞‡∏ö‡∏ö‡∏¢‡∏±‡∏á‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏•‡∏á‡∏î‡∏≤‡∏ï‡πâ‡∏≤‡πÄ‡∏ö‡∏™‡πÅ‡∏ñ‡∏ß‡πÉ‡∏´‡∏°‡πà‡∏ã‡πâ‡∏≥ ‡∏ß‡∏ô‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡πÑ‡∏õ‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏¢‡πÜ‡∏ó‡∏∏‡∏Å‡∏™‡∏¥‡∏ö‡∏ô‡∏≤‡∏ó‡∏µ


üéØ 2. ‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö (Impact)
‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏°‡∏ô‡πÄ‡∏ó‡∏≠‡∏£‡πå‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤‡∏ó‡∏≥‡πÑ‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏µ‡∏ö‡πÅ‡∏Å‡πâ


‡∏°‡∏±‡∏ô‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏´‡πá‡∏ô‡∏ß‡πà‡∏≤‡πÄ‡∏£‡∏≤‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô condition function  ‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏Ñ‡∏£‡∏≠‡∏ö‡∏Ñ‡∏•‡∏∏‡∏° ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÑ‡∏°‡πà‡∏á‡∏±‡πâ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏£‡∏±‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏î‡∏¥‡∏°‡πÜ‡∏ã‡πâ‡∏≥ ‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏á‡∏û‡∏∑‡πâ‡∏ô‡∏ó‡∏µ‡πà ‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏á‡∏û‡∏•‡∏±‡∏á‡∏á‡∏≤‡∏ô ‡πÄ‡∏õ‡∏•‡∏∑‡∏≠‡∏á token ‡πÑ‡∏°‡πà‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô 


üõ† 3. ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà‡πÅ‡∏Å‡πâ‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß (What I did)
‡πÉ‡∏ô‡∏ï‡∏≠‡∏ô‡πÅ‡∏£‡∏Å ‡∏û‡∏≠‡∏£‡∏π‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î‡∏Ç‡∏∂‡πâ‡∏ô‡πÅ‡∏•‡πâ‡∏ß ‡∏Å‡πá‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏Ñ‡∏¥‡∏î flow ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö ‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏ó‡∏µ‡πà‡∏°‡∏±‡∏ô‡∏ó‡∏≥‡∏á‡∏≤‡∏ô‡∏ã‡πâ‡∏≥‡πÜ‡∏ô‡πà‡∏≤‡∏à‡∏∞‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å‡∏Å‡∏≤‡∏£‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏£‡∏≤‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏ä‡πá‡∏Ñ‡πÄ‡∏•‡∏¢‡∏ß‡πà‡∏≤‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏´‡∏ô‡∏Ñ‡∏∑‡∏≠‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡∏™‡∏£‡∏∏‡∏õ‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß ‡πÄ‡∏ß‡∏•‡∏≤‡∏Å‡∏ß‡πâ‡∏≤‡∏ô‡πÑ‡∏ü‡∏•‡πå‡∏°‡∏≤‡πÄ‡∏•‡∏¢‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ó‡∏µ‡πà‡πÄ‡∏à‡∏≠‡∏ó‡∏≥‡∏ã‡πâ‡∏≥ ‡∏ó‡∏∏‡∏Å‡∏£‡∏≠‡∏ö ‡∏ã‡∏∂‡πà‡∏á‡∏à‡∏£‡∏¥‡∏á‡πÜ‡∏°‡∏µ data status ‡∏Ç‡∏≠‡∏á summary ‡πÄ‡∏≠‡∏≤‡πÑ‡∏ß‡πâ‡πÉ‡∏ô table ‡∏î‡πâ‡∏ß‡∏¢‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß‡πÄ‡∏ß‡∏•‡∏≤‡∏°‡∏±‡∏ô‡∏ö‡∏≠‡∏Å done / error / process ‡∏ó‡∏µ‡πà‡πÅ‡∏™‡∏î‡∏á‡∏ö‡∏ô ui web page ‡∏î‡∏±‡∏á‡∏ô‡∏±‡πâ‡∏ô‡πÄ‡∏•‡∏¢‡πÉ‡∏ä‡πâ status ‡∏ô‡∏µ‡πâ ‡∏™‡∏£‡πâ‡∏≤‡∏á function ‡∏°‡∏≤‡πÄ‡∏ä‡πá‡∏Ñ status ‡∏ß‡πà‡∏≤‡∏ñ‡πâ‡∏≤ done ‡πÅ‡∏•‡πâ‡∏ß skip, process = skip, error = ‡∏ó‡∏≥‡∏≠‡∏µ‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á

‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏¢‡πå‡∏´‡∏•‡∏±‡∏á‡πÅ‡∏Å‡πâ - ‡πÑ‡∏°‡πà insert ‡∏ã‡πâ‡∏≥ ,UI ‡πÅ‡∏™‡∏î‡∏á‡∏ñ‡∏π‡∏Å, ‡∏õ‡∏£‡∏∞‡∏´‡∏¢‡∏±‡∏î token

### üìù Related Code:

#### 1. Database Schema - Status Field Definition
**File:** `/Users/natthida.sae/bot/backend/src/config/schema.sql:29`
```sql
status TEXT CHECK (status IN ('process', 'done', 'error')) NOT NULL DEFAULT 'process'
```

#### 2. Main Skip Logic
**File:** `/Users/natthida.sae/bot/backend/src/services/googleDriveFileWatcher.js:134-161`
```javascript
// Check if file already exists
const existingTranscript = await db.query(
  'SELECT id, status FROM transcripts WHERE file_name = $1 AND user_id = $2',
  [fileName, userId]
);

if (existingTranscript.rows.length > 0) {
  const { id, status } = existingTranscript.rows[0];
  
  // Skip if already processed or in process
  if (status === 'done' || status === 'process') {
    console.log(`Skipping ${fileName} - already ${status}`);
    continue;
  }
  
  // Retry if previous attempt failed
  if (status === 'error') {
    console.log(`Retrying ${fileName} - previous attempt failed`);
    // Update status to process for retry
    await db.query(
      'UPDATE transcripts SET status = $1 WHERE id = $2',
      ['process', id]
    );
  }
}
```

#### 3. Status Updates
**File:** `/Users/natthida.sae/bot/backend/src/services/googleDriveFileWatcher.js`
- Line 181: New transcripts created with `status='process'`
- Lines 260-263: Update to `status='done'` after successful summary
- Lines 294-297: Update to `status='error'` on failure

üß© 1. ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£ (Problem) : ‡πÑ‡∏ü‡∏•‡πå‡∏ï‡∏¥‡∏î‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏Å‡∏£‡∏≠‡∏á‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤ database ‡πÄ‡πÄ‡∏•‡πâ‡∏ß‡πÑ‡∏ü‡∏•‡πå‡∏°‡∏µ‡∏ï‡∏ï‡∏¥‡πâ‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô ‡πÅ‡∏ï‡πà‡∏™‡∏£‡πâ‡∏≤‡∏á row ‡πÉ‡∏´‡∏°‡πà ‡∏à‡∏£‡∏¥‡∏á‡πÜ‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ‡πÑ‡∏≠‡∏î‡∏µ meeting ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô ‡∏ï‡∏¥‡∏î‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏£‡∏∞‡∏ö‡∏ö‡∏Å‡∏ß‡∏≤‡∏î‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á ‡πÄ‡πÄ‡∏•‡πâ‡∏ß‡πÄ‡∏û‡∏¥‡πà‡∏°‡∏•‡∏á‡∏î‡∏≤‡∏ï‡πâ‡∏≤‡πÄ‡∏ö‡∏™ row ‡πÉ‡∏´‡∏°‡πà‡πÉ‡∏ô‡∏ó‡∏£‡∏≤‡∏ô‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡∏ï‡∏•‡∏≠‡∏î (‡∏ó‡∏∏‡∏Å‡∏™‡∏¥‡∏ö‡∏ô‡∏≤‡∏ó‡∏µ)
‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ "‡πÄ‡∏Å‡∏¥‡∏î‡∏≠‡∏∞‡πÑ‡∏£‡∏Ç‡∏∂‡πâ‡∏ô"


‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡πÅ‡∏Å‡πâ‡πÉ‡∏´‡πâ‡∏£‡∏∞‡∏ö‡∏ö extract ‡∏ä‡∏∑‡πà‡∏≠ ‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà ‡πÑ‡∏î‡πâ‡∏à‡∏≤‡∏Å ‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå transcript ‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡πÄ‡∏≠‡∏≤‡∏°‡∏≤‡∏à‡∏≤‡∏Å google drive folder ‡πÉ‡∏ô‡∏ï‡∏≠‡∏ô‡πÅ‡∏£‡∏Å‡πÅ‡∏•‡πâ‡∏ß ‡πÄ‡∏£‡∏≤‡∏Å‡πá‡πÄ‡∏Å‡πá‡∏ö‡πÄ‡∏Ç‡πâ‡∏≤ database ‡∏Ç‡∏≠‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏£‡∏≤‡πÇ‡∏î‡∏¢‡∏à‡∏≤‡∏Å‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå ‡πÄ‡∏õ‡πá‡∏ô‡∏´‡∏ô‡∏∂‡πà‡∏á‡πÉ‡∏ô‡∏ü‡∏≠‡∏£‡πå‡∏°‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏µ‡πà‡πÄ‡∏à‡∏≠ [TrueVC] [Pegasus] Morning sync up_2025-07-17T02_54_32+00_00.docx 
‡πÇ‡∏î‡∏¢‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏£‡∏≤‡∏°‡∏µ data structure ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå meeting one to many ‡∏Å‡∏±‡∏ö transcript , transcript one to one ‡∏Å‡∏±‡∏ö summary ‡∏î‡∏±‡∏á‡∏ô‡∏±‡πâ‡∏ô ‡∏à‡∏≤‡∏Å‡∏ï‡∏±‡∏ß‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏ä‡∏∑‡πà‡∏≠ ‡πÄ‡∏£‡∏≤‡πÄ‡∏Å‡πá‡∏ö TrueVC_Pegasus ‡πÉ‡∏ô meeting table ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå meeting.title,‡πÄ‡∏Å‡πá‡∏ö  Morning sync up ‡πÉ‡∏ô transcript table ‡∏Ñ‡∏≠‡∏•‡∏±‡∏°‡∏ô‡πå transcript.title ‡πÅ‡∏•‡∏∞ date ‡∏ï‡∏≤‡∏°‡∏•‡∏≥‡∏î‡∏±‡∏ö‡πÇ‡∏î‡∏¢‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ó‡∏µ‡πà fk ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏Å‡∏±‡∏ô‡∏à‡∏≤‡∏Å‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå ‡∏à‡∏≤‡∏Å‡πÅ‡∏ô‡∏ß‡∏Ñ‡∏¥‡∏î‡∏ô‡∏µ‡πâ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏Å‡∏¥‡∏î‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏ö‡∏≤‡∏á‡∏Ñ‡∏£‡∏±‡πâ‡∏á transcript ‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤‡∏°‡∏µ‡∏ä‡∏∑‡πà‡∏≠‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô‡∏ï‡πà‡∏≤‡∏á‡πÅ‡∏Ñ‡πà‡∏ß‡∏±‡∏ô‡∏ó‡∏µ‡πà‡πÅ‡∏•‡∏∞‡πÄ‡∏ß‡∏•‡∏≤‡∏î‡πâ‡∏≤‡∏ô‡∏ó‡πâ‡∏≤‡∏¢ ‡∏ñ‡∏∂‡∏á‡πÅ‡∏°‡πâ‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡πÄ‡∏à‡∏≠‡∏ß‡πà‡∏≤‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏µ‡∏ï‡∏ï‡∏¥‡πâ‡∏á‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏Å‡∏±‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡∏°‡∏µ‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà‡∏°‡∏≤ detect ‡∏ï‡∏£‡∏á‡∏ô‡∏µ‡πâ‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏°‡∏±‡∏ô‡∏™‡∏£‡πâ‡∏≤‡∏á meetings row ‡πÉ‡∏´‡∏°‡πà‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏¢‡πÜ ‡∏ó‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏à‡∏£‡∏¥‡∏á‡πÜ‡πÄ‡πÄ‡∏•‡πâ‡∏ß‡∏°‡∏±‡∏ô‡∏Ñ‡∏∑‡∏≠ meetings ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô transcript ‡∏û‡∏ß‡∏Å‡∏ô‡∏±‡πâ‡∏ô‡∏Ñ‡∏ß‡∏£‡∏≠‡πâ‡∏≤‡∏á‡∏≠‡∏¥‡∏á‡∏°‡∏≤‡∏ó‡∏µ‡πà ‡πÑ‡∏≠‡∏î‡∏µ meeting ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô  
üéØ 2. ‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö (Impact)
‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏°‡∏ô‡πÄ‡∏ó‡∏≠‡∏£‡πå‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤‡∏ó‡∏≥‡πÑ‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏µ‡∏ö‡πÅ‡∏Å‡πâ


‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏£‡∏≤‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏¥‡∏î‡∏ß‡∏¥‡∏ò‡∏µ ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÉ‡∏ô‡∏Ñ‡∏ß‡∏≤‡∏°‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏Ç‡∏≠‡∏á‡πÄ‡∏£‡∏≤‡∏Ñ‡∏¥‡∏î‡∏ß‡πà‡∏≤ meeting ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô ‡∏ï‡πà‡∏≤‡∏á transcript (‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏Ñ‡∏ô‡∏•‡∏∞‡∏ß‡∏±‡∏ô‡∏Å‡∏±‡∏ô ) ‡∏Ñ‡∏ß‡∏£‡∏°‡∏µ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå relate ‡∏Å‡∏±‡∏ô‡πÑ‡∏õ‡∏ó‡∏µ‡πà id meeting ‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ô ‡πÑ‡∏°‡πà‡∏á‡∏±‡πâ‡∏ô‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏¥‡∏î‡∏ï‡∏≠‡∏ô‡∏ô‡∏µ‡πâ‡∏à‡∏∞‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏à‡∏≠‡∏™‡∏Ñ‡∏£‡∏¥‡∏õ‡∏ï‡πå‡∏°‡∏±‡∏ô‡∏Å‡πá‡∏™‡∏£‡πâ‡∏≤‡∏á meeting ‡∏°‡∏≤‡πÉ‡∏´‡πâ‡πÉ‡∏´‡∏°‡πà ‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏Å‡∏±‡∏ö transcript ‡∏ô‡∏±‡πâ‡∏ô‡∏≠‡∏±‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß ‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö ‡∏°‡∏±‡∏ô‡∏Ñ‡∏∑‡∏≠ one to one relation ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà one to many relation ‡πÉ‡∏ô‡∏ï‡∏≠‡∏ô‡πÅ‡∏£‡∏Å‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô data structure ‡πÑ‡∏ß‡πâ


üõ† 3. ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà‡πÅ‡∏Å‡πâ‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß (What I did)
‡∏ï‡∏≠‡∏ô‡πÅ‡∏£‡∏Å‡∏´‡∏•‡∏±‡∏á‡πÄ‡∏à‡∏≠‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ô‡∏µ‡πâ‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏õ‡∏î‡∏π data structure ‡∏û‡∏≠‡πÄ‡∏Ç‡πâ‡∏≤‡πÉ‡∏à‡∏ß‡πà‡∏≤‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ‡πÄ‡∏Å‡πá‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏°‡∏≤‡πÅ‡∏ö‡∏ö‡πÄ‡∏î‡∏µ‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡∏ó‡∏µ‡πà‡πÄ‡∏£‡∏≤‡∏ß‡∏≤‡∏á‡πÅ‡∏ú‡∏ô‡πÑ‡∏ß‡πâ‡∏Å‡πá‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÑ‡∏õ‡∏î‡∏π‡∏ó‡∏µ‡πà‡πÇ‡∏Ñ‡πâ‡∏î ‡πÇ‡∏î‡∏¢‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏°‡∏±‡∏ô‡πÄ‡∏Å‡∏¥‡∏î‡∏à‡∏≤‡∏Å‡∏ó‡∏∏‡∏Å‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏µ‡πà‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏à‡∏≠‡∏à‡∏≤‡∏Å‡πÑ‡∏ü‡∏•‡πå‡∏°‡∏±‡∏ô‡∏à‡∏∞‡∏™‡∏£‡πâ‡∏≤‡∏á meeting ‡πÉ‡∏´‡∏°‡πà‡∏ó‡∏∏‡∏Å‡∏Ñ‡∏£‡∏±‡πâ‡∏á ‡∏à‡∏≤‡∏Å transcript ‡∏ô‡∏±‡πâ‡∏ô ‡πÄ‡∏£‡∏≤‡∏™‡∏£‡πâ‡∏≤‡∏á function ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏ä‡πá‡∏Ñ‡∏ß‡πà‡∏≤‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡πÑ‡∏î‡πâ‡∏ä‡∏∑‡πà‡∏≠‡πÑ‡∏ü‡∏•‡πå‡∏ô‡∏µ‡πâ‡∏°‡∏≤ ‡πÄ‡∏£‡∏≤‡πÄ‡∏Ñ‡∏¢‡∏°‡∏µ‡∏ä‡∏∑‡πà‡∏≠ meeting title ‡∏ô‡∏µ‡πâ‡∏≠‡∏¢‡∏π‡πà‡πÄ‡πÄ‡∏•‡πâ‡∏ß‡∏°‡∏±‡πâ‡∏¢ ‡∏ñ‡πâ‡∏≤‡∏°‡∏µ‡∏≠‡∏¢‡∏π‡πà‡πÄ‡πÄ‡∏•‡πâ‡∏ß‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏Å‡∏±‡∏ö meeting id ‡∏ó‡∏µ‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏≠‡∏¢‡∏π‡πà‡πÅ‡∏•‡πâ‡∏ß‡πÑ‡∏î‡πâ‡πÄ‡∏•‡∏¢ ‡∏´‡∏£‡∏∑‡∏≠‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡πá‡πÉ‡∏´‡πâ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÉ‡∏´‡∏°‡πà

‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö
‡∏£‡∏≤‡∏¢‡∏•‡∏∞‡πÄ‡∏≠‡∏µ‡∏¢‡∏î
‚ùå DB redundancy
‡πÄ‡∏Å‡πá‡∏ö meeting ‡πÄ‡∏î‡∏¥‡∏°‡∏ã‡πâ‡∏≥‡∏ã‡πâ‡∏≠‡∏ô‡∏´‡∏•‡∏≤‡∏¢‡∏£‡∏≠‡∏ö
‚ùå UI listing ‡∏ú‡∏¥‡∏î
‡πÅ‡∏™‡∏î‡∏á meeting ‡∏´‡∏•‡∏≤‡∏¢‡∏≠‡∏±‡∏ô ‡∏ó‡∏±‡πâ‡∏á‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏£‡πÄ‡∏õ‡πá‡∏ô‡∏≠‡∏±‡∏ô‡πÄ‡∏î‡∏µ‡∏¢‡∏ß
‚ùå ‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏±‡∏°‡∏û‡∏±‡∏ô‡∏ò‡πå‡∏û‡∏±‡∏á
transcript ‡πÑ‡∏°‡πà grouped ‡∏ï‡∏≤‡∏° meeting ‡∏ó‡∏µ‡πà‡∏Ñ‡∏ß‡∏£‡πÄ‡∏õ‡πá‡∏ô

### üìù Related Code:

#### 1. Meeting Grouping Logic - findOrCreateMeeting
**File:** `/Users/natthida.sae/bot/backend/src/services/googleDriveFileWatcher.js:199-230`
```javascript
async function findOrCreateMeeting(meetingTitle, userId) {
  try {
    // Check if meeting already exists for this user
    const existingMeeting = await db.query(
      'SELECT id, title FROM meetings WHERE LOWER(TRIM(title)) = LOWER(TRIM($1)) AND user_id = $2 LIMIT 1',
      [meetingTitle, userId]
    );
    
    if (existingMeeting.rows.length > 0) {
      console.log(`Found existing meeting: ${existingMeeting.rows[0].title}`);
      return existingMeeting.rows[0].id;
    }
    
    // Create new meeting if not exists
    const newMeeting = await db.query(
      'INSERT INTO meetings (title, user_id) VALUES ($1, $2) RETURNING id',
      [meetingTitle, userId]
    );
    
    console.log(`Created new meeting: ${meetingTitle}`);
    return newMeeting.rows[0].id;
  } catch (error) {
    console.error('Error in findOrCreateMeeting:', error);
    throw error;
  }
}
```

#### 2. Meeting Title Extraction from Filename
**File:** `/Users/natthida.sae/bot/backend/src/utils/validation.js:104-178`
```javascript
function extractMeetingInfoFromFilename(filename) {
  // Multiple patterns to extract meeting info
  // Pattern 1: [Org] [Project] Description_DateTime
  // Pattern 2: [Org][Project][SubProject] Description_DateTime
  // Pattern 3: MeetingName_YYYY-MM-DD
  // ... handles various filename formats
}
```

#### 3. Meeting Title Normalization
**File:** `/Users/natthida.sae/bot/backend/src/utils/validation.js:78-97`
```javascript
function normalizeMeetingTitle(title) {
  if (!title) return '';
  return title
    .toLowerCase()
    .trim()
    .replace(/\s+/g, ' ')
    .replace(/[^\w\s]/g, '')
    .replace(/\b(call|calls)\b/g, 'meeting')
    .replace(/\b(sync|syncs)\b/g, 'meeting');
}
```

#### 4. Database Indexes for Performance
**File:** `/Users/natthida.sae/bot/backend/src/config/migrations/002_add_meeting_title_index.sql:5-8`
```sql
-- Index for case-insensitive meeting title searches
CREATE INDEX IF NOT EXISTS idx_meetings_title_lower ON meetings(LOWER(title));
-- Composite index for user and title
CREATE INDEX IF NOT EXISTS idx_meetings_user_title_lower ON meetings(user_id, LOWER(title));
```



üß© 1. ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏Ñ‡∏∑‡∏≠‡∏≠‡∏∞‡πÑ‡∏£ (Problem) : ‡πÅ‡∏Å‡πâ‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á ‡πÑ‡∏ü‡∏•‡πå‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ summary ‡∏≠‡∏≠‡∏Å‡∏°‡∏≤‡πÑ‡∏î‡πâ‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏¢‡πå‡πÄ‡πÄ‡∏•‡πâ‡∏ß‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏•‡∏á‡∏î‡∏≤‡∏ï‡πâ‡∏≤‡πÄ‡∏ö‡∏™‡πÑ‡∏î‡πâ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏î‡∏∂‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏°‡∏≤‡πÇ‡∏ä‡∏ß‡πå‡πÉ‡∏ô ui  web app ‡πÑ‡∏î‡πâ‡πÅ‡∏ï‡πà‡∏ï‡∏¥‡∏î‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô summary ‡∏•‡∏á file ‡πÄ‡∏î‡∏¥‡∏°‡πÉ‡∏ô google drive folder ‡πÑ‡∏î‡πâ ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏ï‡∏¥‡∏î‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á system quota limit ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÄ‡∏õ‡πá‡∏ô system sccount ‡∏£‡∏≠‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏≥‡πÄ‡∏õ‡πá‡∏ô user account ‡πÄ‡πÄ‡∏•‡πâ‡∏ß‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡πÄ‡∏û‡∏£‡∏≤‡∏∞ user acc ‡∏°‡∏µ storage ‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á (‡∏ï‡∏≠‡∏ô‡πÅ‡∏£‡∏Å‡∏ï‡∏¥‡∏î‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡πà‡∏ô‡∏°‡∏≤‡πÄ‡∏õ‡πá‡∏ô .txt ‡πÄ‡πÄ‡∏ï‡πà‡∏ï‡∏±‡∏ß‡πÑ‡∏ü‡∏•‡πå‡∏à‡∏£‡∏¥‡∏á‡∏Ñ‡∏∑‡∏≠ docx ‡πÄ‡∏•‡∏¢‡∏ï‡πâ‡∏≠‡∏á import ‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡πÑ‡∏ß‡πâ ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏õ‡∏•‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ñ‡∏≠‡∏î‡πÄ‡∏õ‡πá‡∏ô docx ‡πÄ‡∏û‡∏¥‡πà‡∏°)
‡∏≠‡∏ò‡∏¥‡∏ö‡∏≤‡∏¢ "‡πÄ‡∏Å‡∏¥‡∏î‡∏≠‡∏∞‡πÑ‡∏£‡∏Ç‡∏∂‡πâ‡∏ô"


‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏ó‡∏µ‡πà‡∏•‡∏≠‡∏á‡πÄ‡∏ó‡∏™‡πÉ‡∏™‡πà‡πÑ‡∏ü‡∏•‡πå transcript ‡∏•‡∏á‡πÉ‡∏ô folder ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÉ‡∏´‡πâ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏£‡∏≤‡∏Å‡∏ß‡πâ‡∏≤‡∏ô‡∏°‡∏±‡∏ô‡∏°‡∏≤‡∏™‡∏£‡∏∏‡∏õ ‡πÄ‡∏à‡∏≠‡∏ß‡πà‡∏≤‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÅ‡∏™‡∏î‡∏á summary ‡πÑ‡∏î‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á‡πÉ‡∏ô ui web app ‡πÄ‡πÄ‡∏ï‡πà‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏•‡∏á‡πÑ‡∏õ‡πÉ‡∏ô file transcript ‡πÄ‡∏î‡∏¥‡∏°‡πÉ‡∏ô google drive folder ‡πÑ‡∏î‡πâ ‡πÄ‡∏û‡∏£‡∏≤‡∏∞ ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏£‡∏≤‡∏Å‡πá‡∏ó‡∏≥‡∏ï‡∏≤‡∏° flow ‡∏ó‡∏µ‡πà‡∏ß‡∏≤‡∏á‡πÑ‡∏ß‡πâ‡πÑ‡∏î‡πâ‡∏ñ‡∏π‡∏Å ‡πÅ‡∏ï‡πà‡πÄ‡∏Å‡∏¥‡∏î‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ó‡∏µ‡πà‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡∏ó‡∏µ‡πà llm ‡∏™‡πà‡∏á result ‡∏Å‡∏•‡∏±‡∏ö‡∏°‡∏≤‡πÉ‡∏´‡πâ‡∏£‡∏∞‡∏ö‡∏ö ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏£‡∏≤‡∏Å‡πá insert ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏• summary ‡∏ó‡∏µ‡πà‡πÑ‡∏î‡πâ ‡∏•‡∏á‡∏î‡∏≤‡∏ï‡πâ‡∏≤‡πÄ‡∏ö‡∏™‡πÑ‡∏î‡πâ‡∏ñ‡∏π‡∏Å‡∏ï‡πâ‡∏≠‡∏á ‡∏ó‡∏≥‡πÉ‡∏´‡πâ web app ui ‡∏ó‡∏µ‡πà query ‡∏à‡∏≤‡∏Å database ‡πÅ‡∏™‡∏î‡∏á‡∏ú‡∏•‡∏ñ‡∏π‡∏Å ‡πÄ‡∏ó‡πà‡∏≤‡∏Å‡∏±‡∏ö‡∏ß‡πà‡∏≤‡πÄ‡∏Å‡∏¥‡∏î‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡∏ï‡∏£‡∏á‡∏ù‡∏±‡πà‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏£‡∏≤‡∏Å‡∏±‡∏ö‡∏™‡πà‡∏ß‡∏ô google drive 
üéØ 2. ‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö (Impact)
‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏°‡∏ô‡πÄ‡∏ó‡∏≠‡∏£‡πå‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤‡∏ó‡∏≥‡πÑ‡∏°‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏µ‡∏ö‡πÅ‡∏Å‡πâ


‡∏ï‡πâ‡∏≠‡∏á‡∏£‡∏µ‡∏ö‡πÅ‡∏Å‡πâ‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÄ‡∏õ‡πá‡∏ô‡∏™‡πà‡∏ß‡∏ô‡∏ó‡∏µ‡πà requirement  user ‡∏≠‡∏¢‡∏≤‡∏Å‡πÉ‡∏´‡πâ‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡πÄ‡∏´‡πá‡∏ô‡∏ú‡∏•‡∏•‡∏±‡∏û‡∏ò‡πå transcript ‡∏ó‡∏µ‡πà‡∏™‡∏£‡∏∏‡∏õ‡∏°‡∏≤‡πÄ‡πÄ‡∏•‡πâ‡∏ß‡∏•‡∏á‡πÑ‡∏õ‡πÉ‡∏ô‡πÑ‡∏ü‡∏•‡πå‡πÄ‡∏î‡∏¥‡∏°‡πÉ‡∏ô google drive folder ‡πÑ‡∏î‡πâ


üõ† 3. ‡∏ß‡∏¥‡∏ò‡∏µ‡∏ó‡∏µ‡πà‡πÅ‡∏Å‡πâ‡πÑ‡∏õ‡πÅ‡∏•‡πâ‡∏ß (What I did)
‡πÑ‡∏õ‡∏î‡∏π‡∏™‡∏≤‡πÄ‡∏´‡∏ï‡∏∏‡∏ß‡πà‡∏≤‡πÄ‡∏Å‡∏¥‡∏î error ‡∏≠‡∏∞‡πÑ‡∏£ ‡πÄ‡∏à‡∏≠ error ‡πÉ‡∏ô backend ‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Å‡∏±‡∏ö‡πÄ‡∏£‡∏∑‡πà‡∏≠‡∏á quota limit ‡πÄ‡∏•‡∏¢‡πÑ‡∏õ‡∏´‡∏≤‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡∏£‡∏π‡πâ‡∏ß‡πà‡∏≤‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡∏£‡∏≠‡∏ö‡∏ô‡∏µ‡πâ ‡πÉ‡∏ä‡πâ service account ‡∏£‡∏≠‡∏ö‡∏Å‡πà‡∏≠‡∏ô‡∏ó‡∏≥‡πÄ‡∏õ‡πá‡∏ô user account ‡πÄ‡πÄ‡∏•‡πâ‡∏ß‡πÉ‡∏ä‡πâ‡πÑ‡∏î‡πâ‡πÄ‡∏û‡∏£‡∏≤‡∏∞ user acc ‡∏°‡∏µ storage ‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á ‡∏≠‡∏≤‡∏à‡∏à‡∏∞‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ create update file ‡πÑ‡∏î‡πâ ‡πÄ‡πÄ‡∏ï‡πà service account ‡∏ó‡∏≥‡πÑ‡∏î‡πâ‡πÅ‡∏Ñ‡πà update file ‡πÑ‡∏î‡πâ ‡∏ï‡∏≠‡∏ô‡πÅ‡∏£‡∏Å‡∏ï‡∏¥‡∏î‡∏õ‡∏±‡∏ç‡∏´‡∏≤‡πÄ‡∏û‡∏£‡∏≤‡∏∞‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏ü‡∏±‡∏á‡∏Å‡πå‡∏ä‡∏±‡πà‡∏ô‡∏°‡∏≤‡πÄ‡∏õ‡πá‡∏ô .txt ‡πÄ‡πÄ‡∏ï‡πà‡∏ï‡∏±‡∏ß‡πÑ‡∏ü‡∏•‡πå‡∏à‡∏£‡∏¥‡∏á‡∏Ñ‡∏∑‡∏≠ docx ‡πÄ‡∏•‡∏¢‡∏ï‡πâ‡∏≠‡∏á import docx help ‡πÑ‡∏ß‡πâ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏õ‡∏•‡∏á‡πÑ‡∏ü‡∏•‡πå‡∏•‡∏á‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏ß‡πâ ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡πÅ‡∏õ‡∏•‡∏á‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ñ‡∏≠‡∏î‡πÄ‡∏õ‡πá‡∏ô docx ‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÉ‡∏ô‡∏ï‡∏≠‡∏ô‡πÄ‡∏Ç‡∏µ‡∏¢‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡∏•‡∏á‡πÑ‡∏õ‡πÄ‡∏õ‡πá‡∏ô docx ‡πÄ‡∏î‡∏¥‡∏°‡∏î‡πâ‡∏ß‡∏¢‡∏Å‡∏≤‡∏£ update

### üìù Related Code:

#### 1. Google Drive Service - Authentication & File Updates
**File:** `/Users/natthida.sae/bot/backend/src/services/googleDriveService.js`

**Service Account Authentication (Lines 15-40):**
```javascript
const auth = new google.auth.GoogleAuth({
  keyFile: process.env.GOOGLE_SERVICE_ACCOUNT_PATH,
  scopes: ['https://www.googleapis.com/auth/drive'],
});

const authClient = await auth.getClient();
this.drive = google.drive({ version: 'v3', auth: authClient });
```

**Update Text/Google Docs (Lines 133-152):**
```javascript
async updateFile(fileId, content, mimeType = 'text/plain') {
  const media = {
    mimeType: mimeType,
    body: content,
  };
  
  const response = await this.drive.files.update({
    fileId: fileId,
    media: media,
  });
  
  return response.data;
}
```

**Update DOCX Files (Lines 170-199):**
```javascript
async updateDocxFile(fileId, modifyCallback) {
  // Download original file
  const response = await this.drive.files.get({
    fileId: fileId,
    alt: 'media'
  }, { responseType: 'arraybuffer' });
  
  // Apply modifications
  const modifiedBuffer = await modifyCallback(Buffer.from(response.data));
  
  // Upload modified file
  const media = {
    mimeType: 'application/vnd.openxmlformats-officedocument.wordprocessingml.document',
    body: Readable.from(modifiedBuffer),
  };
  
  return await this.drive.files.update({
    fileId: fileId,
    media: media,
  });
}
```

#### 2. DOCX File Manipulation
**File:** `/Users/natthida.sae/bot/backend/src/utils/docxHelper.js`

**Libraries Used:**
```javascript
const { Document, Packer, Paragraph, TextRun } = require('docx'); // Line 1
const mammoth = require('mammoth'); // Line 2
```

**Append Summary to DOCX (Lines 14-77):**
```javascript
async function appendSummaryToDocx(docxBuffer, summaryText) {
  // Extract original text
  const result = await mammoth.extractRawText({ buffer: docxBuffer });
  const originalText = result.value;
  
  // Create new document with original + summary
  const doc = new Document({
    sections: [{
      properties: {},
      children: [
        ...createParagraphsFromText(originalText),
        new Paragraph({ text: "" }), // Empty line
        new Paragraph({
          children: [new TextRun({
            text: "=== AI SUMMARY ===",
            bold: true,
          })],
        }),
        ...formatSummaryContent(summaryText),
      ],
    }],
  });
  
  return await Packer.toBuffer(doc);
}
```

#### 3. Main Write Summary Function
**File:** `/Users/natthida.sae/bot/backend/src/services/googleDriveFileWatcher.js:303-408`

**Write Summary to Google Drive:**
```javascript
async writeSummaryToGoogleDrive(fileId, transcriptId, summary, mimeType) {
  try {
    // Format summary text
    const summaryText = formatSummaryText(summary);
    
    // Handle different file types
    if (mimeType.includes('wordprocessingml.document')) {
      // Handle .docx files
      await googleDriveService.updateDocxFile(fileId, async (originalBuffer) => {
        return await appendSummaryToDocx(originalBuffer, summaryText);
      });
    } else {
      // Handle text files and Google Docs
      const originalContent = await googleDriveService.downloadFile(fileId);
      const updatedContent = originalContent + '\n\n' + summaryText;
      await googleDriveService.updateFile(fileId, updatedContent, mimeType);
    }
    
    // Update file hash in database
    const updatedFile = await googleDriveService.getFile(fileId);
    await db.query(
      'UPDATE transcripts SET file_hash = $1 WHERE id = $2',
      [updatedFile.md5Checksum, transcriptId]
    );
  } catch (error) {
    console.error('Error writing summary to Google Drive:', error);
    throw error;
  }
}
```

#### 4. Summary Formatting
**File:** `/Users/natthida.sae/bot/backend/src/services/googleDriveFileWatcher.js:322-364`
```javascript
// Creates formatted summary with sections for:
// - Header with generation date
// - Attendees
// - Key Decisions  
// - Action Items
// - Discussion Highlights
```  
